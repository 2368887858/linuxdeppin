<!doctype html>
<head>
    <meta charset="UTF-8"/>
    <title>Hello, WebEngine</title>
</head>

<body>
    <h1>Hello</h1>

    <p id="serverMsg"></p>

    <br />
    <input type="text" id="msg"/>
    <input type="submit" id="send" value="Send to Server"/>

    <div>
        <a href="http://z.cn" title="Amazon CN">Amazon China</a>
    </div>

    <script>
        function testCrossDomain() {
            var xhr = new XMLHttpRequest();
            xhr.open('get', 'http://music.163.com');
            xhr.send();
        }

        function bootstrap() {
            document.getElementById("send").onclick = function () {
                var msg = document.getElementById("msg").value;
                dialog && dialog.printMessage(msg);
            };

            dialog.onTimeout.connect(function () {
                console.log("dialog onTimeout");
            })

            testCrossDomain();
        }

        new QWebChannel(qt.webChannelTransport, function(channel) {
            window.channel = channel;
            window.dialog = channel.objects.dialog;
            bootstrap();
        });
    </script>
</body>
