<!doctype html>
<head>
    <meta charset="UTF-8"/>
    <title>Hello, WebEngine</title>
</head>

<body>
    <h1>Hello</h1>

    <p id="serverMsg"></p>

    <br />
    <input type="text" id="msg"/>
    <input type="submit" id="send" value="Send to Server"/>

    <div>
        <a href="http://z.cn" title="Amazon CN">Amazon China</a>
    </div>

    <h2>Dialog test</h2>
    <div>
        <input type="button" onclick="alert('Alert!');" value="Alter dialog"/>
        <input type="button" onclick="onConfirmButtonClicked();" value="Confirm dialog"/>
        <input type="button" onclick="onPromptButtonClicked();" value="Prompt dialog"/>
    </div>
    <div>
        <input type="file" name="fileUpload" value="fileUpload" id="fileUpload">
    </div>

    <script>
        function onConfirmButtonClicked() {
            var ret = confirm("Confirm?");
            console.log("confirm result: ", ret);
        }
        function onPromptButtonClicked() {
            var ret = prompt("Please input your name:");
            console.log("prompt returns: ", ret);
        }
    </script>

    <script>
        function testCrossDomain() {
            var xhr = new XMLHttpRequest();
            xhr.open('get', 'http://music.163.com');
            xhr.send();
        }

        function bootstrap() {
            document.getElementById("send").onclick = function () {
                var msg = document.getElementById("msg").value;
                dialog && dialog.printMessage(msg);
            };

            dialog.onTimeout.connect(function () {
                console.log("dialog onTimeout");
            })

            testCrossDomain();
        }

        new QWebChannel(qt.webChannelTransport, function(channel) {
            window.channel = channel;
            window.dialog = channel.objects.dialog;
            bootstrap();
        });
    </script>
</body>
